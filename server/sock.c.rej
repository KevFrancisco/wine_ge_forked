--- server/sock.c
+++ server/sock.c
@@ -3052,7 +3052,7 @@ static void poll_socket( struct sock *poll_sock, struct async *async, int exclus
         req->sockets[i].sock = (struct sock *)get_handle_obj( current->process, sockets[i].socket, 0, &sock_ops );
         if (!req->sockets[i].sock)
         {
-            for (j = 0; j < i; ++j) release_object( req->sockets[i].sock );
+            for (j = 0; j < i; ++j) release_object( req->sockets[j].sock );
             if (req->timeout) remove_timeout_user( req->timeout );
             free( req );
             return;
--- server/sock.c
+++ server/sock.c
@@ -2342,7 +2342,7 @@ static void sock_ioctl( struct fd *fd, ioctl_code_t code, struct async *async )
         allow_fd_caching( sock->fd );
 
         unix_len = sizeof(unix_addr);
-        if (!sock->bound && !getsockname( unix_fd, &unix_addr.addr, &unix_len ))
+        if (!getsockname( unix_fd, &unix_addr.addr, &unix_len ))
             sock->addr_len = sockaddr_from_unix( &unix_addr, &sock->addr.addr, sizeof(sock->addr) );
         sock->bound = 1;
 
